<!-- include the stylesheet -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" crossorigin="anonymous">

<mat-toolbar>
  <mat-toolbar-row>
    <button mat-icon-button [matMenuTriggerFor]="menu">
      <mat-icon>menu</mat-icon>
    </button>
    <mat-menu #menu="matMenu">
      <button mat-menu-item [matMenuTriggerFor]="fileMenu">File</button>
      <mat-menu #fileMenu="matMenu">
        <button mat-menu-item (click)="openDirectory()">Open Directory</button>
        <button mat-menu-item (click)="newNote()">New Note</button>
        <button mat-menu-item (click)="saveAllNotes()">Save</button>
        <button mat-menu-item (click)="saveAsAllNotes()">Save As</button>
        <button mat-menu-item (click)="clearNotes()">Clear Notes</button>
      </mat-menu>
      <button mat-menu-item [matMenuTriggerFor]="editMenu">Edit</button>
      <mat-menu #editMenu="matMenu">
        <button mat-menu-item (click)="undo()">Undo</button>
        <button mat-menu-item (click)="redo()">Redo</button>
        <button mat-menu-item (click)="cut()">Cut</button>
        <button mat-menu-item (click)="copy()">Copy</button>
        <button mat-menu-item (click)="paste()">Paste</button>
        <!-- TODO make the edit menu - all of these actions need to be implemented. Add any additional actions you want to the menu. -->
      </mat-menu>
      <button mat-menu-item [matMenuTriggerFor]="viewMenu">View</button>
      <mat-menu #viewMenu="matMenu">
        <button mat-menu-item (click)="appearanceMenu()">Appearance</button>
        <button mat-menu-item (click)="toggleFullScreen()">Toggle Full Screen</button>
        <!-- TODO make the view menu - all of these actions need to be implemented. Add any additional actions you want to the menu. -->
      </mat-menu>
      <button mat-menu-item (click)="openPreferencesMenu()">Preferences</button>
      <!-- the preferences menu is in app-preferences. Open it by calling openPreferencesMenu() -->
      <button mat-menu-item (click)="openHelpMenu()">Help</button>
    </mat-menu>
    <span>Jotmark</span>
    <span class="fill-remaining-space"></span>
    <!-- on the right hand side of the toolbar, add a button that refreshes the notes list -->
    <button mat-icon-button (click)="refreshNotes()">
      <mat-icon>refresh</mat-icon>
    </button>
    <span class="spacer"></span>
  </mat-toolbar-row>
</mat-toolbar>

<div class="main-ui">
  <div class="notes-list" style="display: flex; flex-wrap: wrap; z-index: 1;">
  <ng-container *ngFor="let note of notes">
    <mat-card class="note-card" (click)="handleNoteClick(note, $event)">
      <mat-card-title>{{note.name}}</mat-card-title>
      <mat-card-content>
        <div [innerHTML]="parseAndRender(note.content)"></div>
      </mat-card-content>
    </mat-card>
  </ng-container>
  </div>
  <div class="editor" style="position: fixed; z-index: 2;">
    <app-editor *ngIf="selectedNote" [note]="selectedNote"></app-editor>
  </div>
</div>
